{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/dark.css';\nimport iziToast from 'izitoast';\nconsole.log('iziToast:', iziToast);\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst optionsFp = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  theme: 'dark',\n  onClose,\n};\nflatpickr('#datetime-picker', optionsFp);\n\nconst startBtnEl = document.querySelector('[data-start]');\nconst dayEl = document.querySelector('[data-days]');\nconst hourEl = document.querySelector('[data-hours]');\nconst minuteEl = document.querySelector('[data-minutes]');\nconst secondEl = document.querySelector('[data-seconds]');\n\nstartBtnEl.addEventListener('click', onStartBtn);\n\nlet userSelectedDate;\n\nfunction onClose([selectedDate]) {\n  if (selectedDate > Date.now()) {\n    userSelectedDate = selectedDate.getTime();\n    startBtnEl.disabled = false;\n  } else {\n    userSelectedDate = 0;\n    updateTimerEl(convertMs(0));\n\n    iziToast.error({\n      title: 'Invalid',\n      message: 'Please choose a date in the future',\n      position: 'topCenter',\n      timeout: 3500,\n      transitionIn: 'bounceInDown',\n    });\n    startBtnEl.disabled = true;\n  }\n}\n\nfunction onStartBtn() {\n  startBtnEl.disabled = true;\n  const id = setInterval(() => {\n    const diffTime = userSelectedDate - Date.now();\n    if (diffTime >= 0) {\n      updateTimerEl(convertMs(diffTime));\n    } else {\n      clearInterval(id);\n    }\n  }, 1000);\n}\n\nfunction updateTimerEl({ days, hours, minutes, seconds }) {\n  dayEl.textContent = days.length > 1 ? days : addLeadingZero(days);\n  hourEl.textContent = addLeadingZero(hours);\n  minuteEl.textContent = addLeadingZero(minutes);\n  secondEl.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}"],"names":["iziToast","optionsFp","onClose","flatpickr","startBtnEl","dayEl","hourEl","minuteEl","secondEl","onStartBtn","userSelectedDate","selectedDate","updateTimerEl","convertMs","id","diffTime","days","hours","minutes","seconds","addLeadingZero","ms","value"],"mappings":"iyBAIA,QAAQ,IAAI,YAAaA,CAAQ,EAGjC,MAAMC,EAAY,CAChB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,MAAO,OACP,QAAAC,CACF,EACAC,EAAU,mBAAoBF,CAAS,EAEvC,MAAMG,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAW,SAAS,cAAc,gBAAgB,EAClDC,EAAW,SAAS,cAAc,gBAAgB,EAExDJ,EAAW,iBAAiB,QAASK,CAAU,EAE/C,IAAIC,EAEJ,SAASR,EAAQ,CAACS,CAAY,EAAG,CAC3BA,EAAe,KAAK,OACtBD,EAAmBC,EAAa,UAChCP,EAAW,SAAW,KAEtBM,EAAmB,EACnBE,EAAcC,EAAU,CAAC,CAAC,EAE1Bb,EAAS,MAAM,CACb,MAAO,UACP,QAAS,qCACT,SAAU,YACV,QAAS,KACT,aAAc,cACpB,CAAK,EACDI,EAAW,SAAW,GAE1B,CAEA,SAASK,GAAa,CACpBL,EAAW,SAAW,GACtB,MAAMU,EAAK,YAAY,IAAM,CAC3B,MAAMC,EAAWL,EAAmB,KAAK,IAAG,EACxCK,GAAY,EACdH,EAAcC,EAAUE,CAAQ,CAAC,EAEjC,cAAcD,CAAE,CAEnB,EAAE,GAAI,CACT,CAEA,SAASF,EAAc,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxDd,EAAM,YAAcW,EAAK,OAAS,EAAIA,EAAOI,EAAeJ,CAAI,EAChEV,EAAO,YAAcc,EAAeH,CAAK,EACzCV,EAAS,YAAca,EAAeF,CAAO,EAC7CV,EAAS,YAAcY,EAAeD,CAAO,CAC/C,CAEA,SAASN,EAAUQ,EAAI,CAMrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeE,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}